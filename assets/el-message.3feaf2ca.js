var Z=Object.defineProperty,j=Object.defineProperties;var U=Object.getOwnPropertyDescriptors;var M=Object.getOwnPropertySymbols;var G=Object.prototype.hasOwnProperty,Q=Object.prototype.propertyIsEnumerable;var I=(e,s,n)=>s in e?Z(e,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[s]=n,C=(e,s)=>{for(var n in s||(s={}))G.call(s,n)&&I(e,n,s[n]);if(M)for(var n of M(s))Q.call(s,n)&&I(e,n,s[n]);return e},h=(e,s)=>j(e,U(s));import{aV as W,aW as X,aX as L,y as Y,aY as J,aZ as K,a_ as R,a$ as _,L as H,t as N,b0 as V,$ as x,P as ee,aQ as se,b1 as ne,aS as ae,b2 as oe,I as E,o as p,D as v,S,a1 as te,a2 as le,q as z,a0 as y,V as T,E as re,ag as ie,p as F,G as ue,F as me,a8 as ce,H as q,B as de,af as fe,b3 as pe,b4 as ye,b5 as D,aC as b,b6 as ge,b7 as $,b8 as ve,b9 as P,ba as be,az as O,bb as Ce}from"./index.7718df77.js";const A=["success","info","warning","error"],Te=W({customClass:{type:String,default:""},center:{type:Boolean,default:!1},dangerouslyUseHTMLString:{type:Boolean,default:!1},duration:{type:Number,default:3e3},icon:{type:X,default:""},id:{type:String,default:""},message:{type:L([String,Object,Function]),default:""},onClose:{type:L(Function),required:!1},showClose:{type:Boolean,default:!1},type:{type:String,values:A,default:"info"},offset:{type:Number,default:20},zIndex:{type:Number,default:0},grouping:{type:Boolean,default:!1},repeatNum:{type:Number,default:1}}),he={destroy:()=>!0},Ne=Y({name:"ElMessage",components:C({ElBadge:J,ElIcon:K},R),props:Te,emits:he,setup(e){const s=_("message"),n=H(!1),c=H(e.type?e.type==="error"?"danger":e.type:"info");let i;const d=N(()=>{const m=e.type;return{[s.bm("icon",m)]:m&&V[m]}}),a=N(()=>e.icon||V[e.type]||""),t=N(()=>({top:`${e.offset}px`,zIndex:e.zIndex}));function r(){e.duration>0&&({stop:i}=ae(()=>{n.value&&u()},e.duration))}function l(){i==null||i()}function u(){n.value=!1}function f({code:m}){m===oe.esc?n.value&&u():r()}return x(()=>{r(),n.value=!0}),ee(()=>e.repeatNum,()=>{l(),r()}),se(document,"keydown",f),{ns:s,typeClass:d,iconComponent:a,customStyle:t,visible:n,badgeType:c,close:u,clearTimer:l,startTimer:r}}}),Ee=["id"],Se=["innerHTML"];function $e(e,s,n,c,i,d){const a=E("el-badge"),t=E("el-icon"),r=E("close");return p(),v(fe,{name:e.ns.b("fade"),onBeforeLeave:e.onClose,onAfterLeave:s[2]||(s[2]=l=>e.$emit("destroy"))},{default:S(()=>[te(z("div",{id:e.id,class:y([e.ns.b(),{[e.ns.m(e.type)]:e.type&&!e.icon},e.ns.is("center",e.center),e.ns.is("closable",e.showClose),e.customClass]),style:de(e.customStyle),role:"alert",onMouseenter:s[0]||(s[0]=(...l)=>e.clearTimer&&e.clearTimer(...l)),onMouseleave:s[1]||(s[1]=(...l)=>e.startTimer&&e.startTimer(...l))},[e.repeatNum>1?(p(),v(a,{key:0,value:e.repeatNum,type:e.badgeType,class:y(e.ns.e("badge"))},null,8,["value","type","class"])):T("v-if",!0),e.iconComponent?(p(),v(t,{key:1,class:y([e.ns.e("icon"),e.typeClass])},{default:S(()=>[(p(),v(re(e.iconComponent)))]),_:1},8,["class"])):T("v-if",!0),ie(e.$slots,"default",{},()=>[e.dangerouslyUseHTMLString?(p(),F(me,{key:1},[T(" Caution here, message could've been compromised, never use user's input as message "),z("p",{class:y(e.ns.e("content")),innerHTML:e.message},null,10,Se)],2112)):(p(),F("p",{key:0,class:y(e.ns.e("content"))},ue(e.message),3))]),e.showClose?(p(),v(t,{key:2,class:y(e.ns.e("closeBtn")),onClick:ce(e.close,["stop"])},{default:S(()=>[q(r)]),_:1},8,["class","onClick"])):T("v-if",!0)],46,Ee),[[le,e.visible]])]),_:3},8,["name","onBeforeLeave"])}var ke=ne(Ne,[["render",$e],["__file","/home/runner/work/element-plus/element-plus/packages/components/message/src/message.vue"]]);const o=[];let we=1;const g=function(e={},s){if(!pe)return{close:()=>{}};if(ye(D.max)&&o.length>=D.max)return{close:()=>{}};if(!b(e)&&ge(e)&&e.grouping&&!b(e.message)&&o.length){const f=o.find(m=>{var k,w,B;return`${(w=(k=m.vm.props)==null?void 0:k.message)!=null?w:""}`==`${(B=e.message)!=null?B:""}`});if(f)return f.vm.component.props.repeatNum+=1,f.vm.component.props.type=(e==null?void 0:e.type)||"info",{close:()=>u.component.proxy.visible=!1}}($(e)||b(e))&&(e={message:e});let n=e.offset||20;o.forEach(({vm:f})=>{var m;n+=(((m=f.el)==null?void 0:m.offsetHeight)||0)+16}),n+=16;const{nextZIndex:c}=ve(),i=`message_${we++}`,d=e.onClose,a=h(C({zIndex:c()},e),{offset:n,id:i,onClose:()=>{Be(i,d)}});let t=document.body;P(e.appendTo)?t=e.appendTo:$(e.appendTo)&&(t=document.querySelector(e.appendTo)),P(t)||(t=document.body);const r=document.createElement("div");r.className=`container_${i}`;const l=a.message,u=q(ke,a,be(l)?{default:l}:b(l)?{default:()=>l}:null);return u.appContext=s||g._context,u.props.onDestroy=()=>{O(null,r)},O(u,r),o.push({vm:u}),t.appendChild(r.firstElementChild),{close:()=>u.component.proxy.visible=!1}};A.forEach(e=>{g[e]=(s={},n)=>(($(s)||b(s))&&(s={message:s}),g(h(C({},s),{type:e}),n))});function Be(e,s){const n=o.findIndex(({vm:a})=>e===a.component.props.id);if(n===-1)return;const{vm:c}=o[n];if(!c)return;s==null||s(c);const i=c.el.offsetHeight;o.splice(n,1);const d=o.length;if(!(d<1))for(let a=n;a<d;a++){const t=Number.parseInt(o[a].vm.el.style.top,10)-i-16;o[a].vm.component.props.offset=t}}function Me(){var e;for(let s=o.length-1;s>=0;s--){const n=o[s].vm.component;(e=n==null?void 0:n.proxy)==null||e.close()}}g.closeAll=Me;g._context=null;const He=Ce(g,"$message");export{He as E};
